-- Andriy Voitiv homework

-- MySQL Script generated by MySQL Workbench
-- Fri Jun 24 15:49:27 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema accounts
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `accounts` DEFAULT CHARACTER SET utf8 ;
USE `accounts` ;

-- -----------------------------------------------------
-- Table `accounts`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `surname` VARCHAR(45) NOT NULL,
  `age` INT NOT NULL,
  `city` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

INSERT INTO `user` (name, surname, age, city)
VALUES 
	("Petro", "Hanchuk", 35, "Ternava"),
    ("Taras", "Maryniak", 24, "Sambir"),
    ("Andriy", "Kis", 25, "Kniazhpil"),
    ("Ivan", "Medvid", 45, "Dobromyl"),
    ("Petro", "Bac", 29, "Kropyvnyk");

-- -----------------------------------------------------
-- Table `accounts`.`product`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `product` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(100) NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  `price` INT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

INSERT INTO product (name, description, price)
values 
	("Carrot", "From village", 40),
    ("Apple", "From garden", 12),
    ("Cucumber", "with GMO", 10),
    ("Strawbery", "From Olas garden", 70),
    ("Watermelon", "From Herson", 50);

-- -----------------------------------------------------
-- Table `accounts`.`order`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `order` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `purchaseDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `userId` INT NOT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT FK_order_user FOREIGN KEY (userId) REFERENCES `user`(id)
) ENGINE = InnoDB;

INSERT INTO `order` (purchaseDate, userId)
VALUES 
	(NOW(), 1),
    (NOW(), 2),
    (NOW(), 3),
    (NOW(), 1),
    (NOW(), 2);

-- -----------------------------------------------------
-- Table `accounts`.`order_product`
-- -----------------------------------------------------
CREATE TABLE `order_product` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `productId` INT NOT NULL,
  `orderId` INT NOT NULL,
  `quantity` INT NOT NULL,
  `productPrice` DECIMAL(10) NOT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT FK_orderProduct_order FOREIGN KEY (orderId) REFERENCES `order`(id),
  CONSTRAINT FK_orderProduct_product FOREIGN KEY (productId) REFERENCES `product`(id)
) ENGINE=InnoDB;

INSERT INTO `order_product` (orderId, productId, quantity, productPrice)
VALUES 
	(1, 1, 2, 40),
	(1, 2, 1, 12),
	(2, 5, 1, 50),
	(3, 4, 4, 70),
	(4, 3, 3, 10),
    (5, 3, 1, 10);

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
